<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sheet Music ‚Üí MIDI (Three-Staff Editor)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600&family=IBM+Plex+Mono:wght@400;500&family=Inter:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="mist-overlay"></div>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="brand__title">Sheet Music ‚Üí MIDI</div>
        <div class="brand__sub">three-staff composer</div>
      </div>
      <span class="badge"><span class="dot"></span> Editor Active</span>
    </header>

    <section class="panel" id="controlsPanel">
      <div class="panel__head">
        <div class="panel__title">Controls</div>
        <div class="panel__meta">
          <button class="panel__toggle" title="Collapse">‚ñº</button>
        </div>
      </div>
      <div class="panel__body controls" id="controls">
      <div class="cell" style="grid-column: span 2; min-width: 120px">
        <label for="bpm">Tempo (BPM)</label>
        <input id="bpm" type="number" value="100" min="30" max="240" />
      </div>
      <div class="cell" style="grid-column: span 2; min-width: 120px">
        <label for="volume">Volume</label>
        <input id="volume" type="range" min="0" max="100" value="70" />
      </div>
      <div class="cell" style="grid-column: span 2; min-width: 140px">
        <label>Grid Resolution</label>
        <select id="snap">
          <option value="4" selected>Quarter notes</option>
          <option value="8">Eighth notes</option>
          <option value="16">Sixteenth notes</option>
        </select>
      </div>
      <div class="cell" style="grid-column: span 2; min-width: 140px">
        <label>Magic Mode</label>
        <select id="magicMode">
          <option value="phrase" selected>‚ú® Phrase (8-bar arc)</option>
          <option value="loop">üîÅ Loop (tight, repetitive)</option>
          <option value="drift">üåä Drift (sparse, asymmetric)</option>
        </select>
      </div>
      <div class="cell button-row" style="grid-column: span 6;">
        <button id="randomize" class="magic">Magic</button>
        <button id="undo">Undo</button>
        <button id="clear">Clear</button>
        <button id="loop">Loop</button>
        <button id="play" class="green">Play</button>
        <button id="download" class="primary">Export MIDI</button>
      </div>
      <div class="sep"></div>
      <div class="cell" style="grid-column: 1 / -1">
        <label>Tip</label>
        <div style="color:var(--text-muted)"><b>Click</b> grid cells to toggle notes on/off. <b>Right-click</b> to erase. <b>Three staves</b>: Melody (blue), Right Hand (green), Left Hand (amber). <b>Magic</b> generates all parts. Scroll horizontally to see all 8 measures.</div>
      </div>
      </div>
    </section>

    <!-- Melody Staff -->
    <section class="panel staff-section" data-staff="0">
      <div class="panel__head">
        <div class="panel__title">Melody</div>
        <div class="panel__meta">C4 - A5 (Treble)</div>
      </div>
      <div class="panel__body">
        <div class="pitch-grid" id="melodyGrid"></div>
      </div>
    </section>

    <!-- Right Hand Staff -->
    <section class="panel staff-section" data-staff="1">
      <div class="panel__head">
        <div class="panel__title">Right Hand</div>
        <div class="panel__meta">C4 - A5 (Treble)</div>
      </div>
      <div class="panel__body">
        <div class="pitch-grid" id="rightHandGrid"></div>
      </div>
    </section>

    <!-- Left Hand Staff -->
    <section class="panel staff-section" data-staff="2">
      <div class="panel__head">
        <div class="panel__title">Left Hand</div>
        <div class="panel__meta">C2 - E4 (Bass)</div>
      </div>
      <div class="panel__body">
        <div class="pitch-grid" id="leftHandGrid"></div>
      </div>
    </section>

    <footer class="footer">
      <div class="micro">Built with plain HTML/CSS/JS. No external libraries. Export to MIDI for your DAW.</div>
    </footer>
  </div>

  <script src="script.js"></script>
  <script>
    // Collapsible panels
    document.querySelectorAll('.panel__head, .panel-header').forEach(header => {
      header.addEventListener('click', () => {
        header.parentElement.classList.toggle('collapsed');
      });
    });
  </script>
</body>
</html>
