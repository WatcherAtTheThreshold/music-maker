<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Sheet Music → MIDI (Minimal Editor)</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrap">
    <header>
      <span class="badge"><span class="dot"></span> Minimal Staff Editor</span>
      <h1>Sheet Music → MIDI</h1>
    </header>

    <section class="panel" id="controlsPanel">
      <div class="panel-header">Controls</div>
      <div class="panel-content controls" id="controls">
      <div class="cell" style="grid-column: span 2; min-width: 120px">
        <label for="bpm">Tempo (BPM)</label>
        <input id="bpm" type="number" value="100" min="30" max="240" />
      </div>
      <div class="cell" style="grid-column: span 2; min-width: 120px">
        <label for="volume">Volume</label>
        <input id="volume" type="range" min="0" max="100" value="70" />
      </div>
      <div class="cell" style="grid-column: span 2; min-width: 140px">
        <label>Snap</label>
        <select id="snap">
          <option value="1">Whole</option>
          <option value="2">Half</option>
          <option value="4" selected>Quarter</option>
          <option value="8">Eighth</option>
          <option value="16">Sixteenth</option>
        </select>
      </div>
      <div class="cell" style="grid-column: span 2; min-width: 140px">
        <label>Accidental</label>
        <select id="accidental">
          <option value="0" selected>Natural</option>
          <option value="1">Sharp</option>
          <option value="-1">Flat</option>
        </select>
      </div>
      <div class="cell" style="grid-column: span 2; min-width: 140px">
        <label>Tool</label>
        <select id="tool">
          <option value="note" selected>Place note</option>
          <option value="erase">Erase</option>
        </select>
      </div>
      <div class="cell" style="grid-column: span 4; display:flex; gap:8px; align-items:end; justify-content:flex-end">
        <button id="randomize" class="magic">Magic</button>
        <button id="undo">Undo</button>
        <button id="clear">Clear</button>
        <button id="loop">Loop</button>
        <button id="play" class="green">Play</button>
        <button id="download" class="primary">Export MIDI</button>
      </div>
      <div class="sep"></div>
      <div class="cell" style="grid-column: 1 / -1">
        <label>Tip</label>
        <div style="color:var(--muted)">Click on the staff to add notes. This prototype supports a <b>treble clef</b>, key of C, and a single voice. Notes snap to the chosen subdivision. Drag to move within a beat; click a note to select; press <kbd>Delete</kbd> to remove.</div>
      </div>
      </div>
    </section>

    <section class="panel staff-wrap">
      <svg id="staff" viewBox="0 0 2400 930" xmlns="http://www.w3.org/2000/svg"></svg>
      <div class="legend">Range supported: <b>C4</b> (middle C) up to <b>A5</b>. Time signature: <b>4/4</b>. Measures visible: <b>4</b> (expandable in code). Exported MIDI is <b>Format 0</b>, one track with Note On/Off and tempo meta.</div>
    </section>

    <div class="footer">Built with plain HTML/CSS/JS. No external libraries. © You ♥</div>
  </div>

  <script src="script.js"></script>
  <script>
    // Collapsible panels
    document.querySelectorAll('.panel-header').forEach(header => {
      header.addEventListener('click', () => {
        header.parentElement.classList.toggle('collapsed');
      });
    });
  </script>
</body>
</html>
